if (window.performance && window.performance.mark) { window.performance.mark('startLoadBundleInner-async'); }
// Copyright (C) Microsoft Corporation. All rights reserved.
define("Engagement/Interaction/Contracts",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.Medium=2]="Medium";n[n.High=3]="High"}(i=t.RecommendationConfidence||(t.RecommendationConfidence={})),function(n){n[n.Engagement=1]="Engagement";n[n.EngagementLegacy=2]="EngagementLegacy";n[n.Interaction=3]="Interaction";n[n.Offline=4]="Offline";n[n.PageInteraction=5]="PageInteraction"}(r=t.RecommendationType||(t.RecommendationType={}));t.TypeInfo={EngagementContext:{},EngagementData:{},IInteraction:{},IInteractionHistory:{},Interaction:{},Recommendation:{},RecommendationConfidence:{enumValues:{none:0,low:1,medium:2,high:3}},RecommendationInput:{},RecommendationType:{enumValues:{engagement:1,engagementLegacy:2,interaction:3,offline:4,pageInteraction:5}}};t.TypeInfo.EngagementContext.fields={timestamp:{isDate:!0}};t.TypeInfo.EngagementData.fields={expirationDate:{isDate:!0}};t.TypeInfo.IInteraction.fields={timestamp:{isDate:!0}};t.TypeInfo.IInteractionHistory.fields={interactions:{isArray:!0,typeInfo:t.TypeInfo.IInteraction}};t.TypeInfo.Interaction.fields={timestamp:{isDate:!0}};t.TypeInfo.Recommendation.fields={confidence:{enumType:t.TypeInfo.RecommendationConfidence},recommendationType:{enumType:t.TypeInfo.RecommendationType}};t.TypeInfo.RecommendationInput.fields={recommendationType:{enumType:t.TypeInfo.RecommendationType}}});
define("Engagement/Recommendation/Contracts",["require","exports"],function(n,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.Medium=2]="Medium";n[n.High=3]="High"}(i=t.RecommendationConfidence||(t.RecommendationConfidence={})),function(n){n[n.Engagement=1]="Engagement";n[n.EngagementLegacy=2]="EngagementLegacy";n[n.Interaction=3]="Interaction";n[n.Offline=4]="Offline";n[n.PageInteraction=5]="PageInteraction"}(r=t.RecommendationType||(t.RecommendationType={}));t.TypeInfo={EngagementData:{},IRecommendation:{},RecommendationConfidence:{enumValues:{none:0,low:1,medium:2,high:3}},RecommendationInput:{},RecommendationType:{enumValues:{engagement:1,engagementLegacy:2,interaction:3,offline:4,pageInteraction:5}}};t.TypeInfo.EngagementData.fields={expirationDate:{isDate:!0}};t.TypeInfo.IRecommendation.fields={confidence:{enumType:t.TypeInfo.RecommendationConfidence},recommendationType:{enumType:t.TypeInfo.RecommendationType}};t.TypeInfo.RecommendationInput.fields={recommendationType:{enumType:t.TypeInfo.RecommendationType}}});
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define("Engagement/Recommendation/SpsExtRestClient",["require","exports","Engagement/Recommendation/Contracts","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getRecommendations=function(n,t){var r={type:n,input:t};return this._beginRequest({httpMethod:"GET",area:"Recommendation",locationId:"6e444775-4f83-46e9-af0d-4d94e72a3c05",resource:"Recommendations",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.IRecommendation,responseIsCollection:!1,queryParams:r,apiVersion:"1.0"})},t.prototype.logRecommendation=function(n,t,i){var r={type:n,engagementId:t};return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Recommendation",locationId:"e911b499-4ee1-4f32-92a0-702c43f75a40",resource:"RecommendationHistory",routeTemplate:"{project}/_apis/{area}/{resource}",routeValues:{project:i},queryParams:r,apiVersion:"1.0"})},t.serviceInstanceId=u.ServiceInstanceTypes.SpsExtension,t}(r.VssHttpClient);t.SpsExtRecommendationHttpClient=f});
define("Engagement/Interaction/SpsExtRestClient",["require","exports","Engagement/Interaction/Contracts","VSS/WebApi/RestClient","VSS/WebApi/Constants"],function(n,t,i,r,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.add=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Interaction",locationId:"b503e84e-1a5b-410a-b51b-bc457ee6ba42",resource:"Interaction",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.Interaction,responseIsCollection:!1,apiVersion:"1.0",data:n})},t.prototype.get=function(n){var t={interactionId:n};return this._beginRequest({httpMethod:"GET",area:"Interaction",locationId:"b503e84e-1a5b-410a-b51b-bc457ee6ba42",resource:"Interaction",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.IInteractionHistory,responseIsCollection:!1,queryParams:t,apiVersion:"1.0"})},t.serviceInstanceId=u.ServiceInstanceTypes.SpsExtension,t}(r.VssHttpClient);t.SpsExtInteractionHttpClient=f});
define("Engagement/Recommendation/AexRestClient",["require","exports","Engagement/Recommendation/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function b(n){return window.VSS&&window.VSS.VssSDKRestVersion&&p[window.VSS.VssSDKRestVersion]?r.getClient(p[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var f,e,o,s,h,c,l,a,v,y,w,p;Object.defineProperty(t,"__esModule",{value:!0});f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.getRecommendations=function(n,t){var r={type:n,input:t};return this._beginRequest({httpMethod:"GET",area:"Recommendation",locationId:"c8e31be5-c629-4748-a75c-7a1779f1d316",resource:"Recommendations",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.IRecommendation,queryParams:r,apiVersion:this.recommendationsApiVersion})},t.prototype.logRecommendation=function(n,t){var i={type:n,engagementId:t};return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Recommendation",locationId:"d154e65b-6b7a-40d5-9058-50a6fd292b35",resource:"RecommendationHistory",routeTemplate:"_apis/{area}/{resource}",queryParams:i,apiVersion:this.recommendationHistoryApiVersion})},t.prototype.write=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Recommendation",locationId:"9f2823d6-4f5a-455f-8f1f-79e629c2caf1",resource:"EngagementData",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.EngagementData,apiVersion:this.engagementDataApiVersion,data:n})},t.prototype.readEngagementIds=function(){return this._beginRequest({httpMethod:"GET",area:"Recommendation",locationId:"9f2823d6-4f5a-455f-8f1f-79e629c2caf1",resource:"EngagementData",routeTemplate:"_apis/{area}/{resource}",responseIsCollection:!0,apiVersion:this.engagementDataApiVersion})},t.prototype.read=function(n){var t={engagementId:n};return this._beginRequest({httpMethod:"GET",area:"Recommendation",locationId:"9f2823d6-4f5a-455f-8f1f-79e629c2caf1",resource:"EngagementData",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.EngagementData,queryParams:t,apiVersion:this.engagementDataApiVersion})},t.serviceInstanceId="00000041-0000-8888-8000-000000000000",t}(u.VssHttpClient);t.CommonMethods2To4_1=f;e=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="4.1-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient4_1=e;o=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="4.0-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient4=o;s=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="3.2-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient3_2=s;h=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="3.1-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient3_1=h;c=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="3.0-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient3=c;l=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="2.3-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient2_3=l;a=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="2.2-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient2_2=a;v=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="2.1-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient2_1=v;y=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.engagementDataApiVersion=r.recommendationHistoryApiVersion=r.recommendationsApiVersion="2.0-preview.1",r}return __extends(t,n),t}(f);t.RecommendationHttpClient2=y;w=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(e);t.RecommendationHttpClient=w;p={"4.1":e,"4.0":o,"3.2":s,"3.1":h,"3.0":c,"2.3":l,"2.2":a,"2.1":v,"2.0":y};t.getClient=b});
define("Engagement/Interaction/AexRestClient",["require","exports","Engagement/Interaction/Contracts","VSS/Service","VSS/WebApi/RestClient"],function(n,t,i,r,u){"use strict";function b(n){return window.VSS&&window.VSS.VssSDKRestVersion&&p[window.VSS.VssSDKRestVersion]?r.getClient(p[window.VSS.VssSDKRestVersion],undefined,undefined,undefined,n):r.getClient(o,undefined,undefined,undefined,n)}var f,e,o,s,h,c,l,a,v,y,w,p;Object.defineProperty(t,"__esModule",{value:!0});f=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t.prototype.get=function(n){var t={interactionId:n};return this._beginRequest({httpMethod:"GET",area:"Interaction",locationId:"9ff633ff-c08d-4c8d-8d32-78025a0d4896",resource:"Interaction",routeTemplate:"_apis/{area}/{resource}",responseType:i.TypeInfo.IInteractionHistory,queryParams:t,apiVersion:this.interactionApiVersion})},t.prototype.add=function(n){return this._beginRequest({httpMethod:"POST",httpResponseType:"html",area:"Interaction",locationId:"9ff633ff-c08d-4c8d-8d32-78025a0d4896",resource:"Interaction",routeTemplate:"_apis/{area}/{resource}",requestType:i.TypeInfo.Interaction,apiVersion:this.interactionApiVersion,data:n})},t.serviceInstanceId="00000041-0000-8888-8000-000000000000",t}(u.VssHttpClient);t.CommonMethods2To4_1=f;e=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="4.1-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient4_1=e;o=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="4.0-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient4=o;s=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="3.2-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient3_2=s;h=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="3.1-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient3_1=h;c=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="3.0-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient3=c;l=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="2.3-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient2_3=l;a=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="2.2-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient2_2=a;v=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="2.1-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient2_1=v;y=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r.interactionApiVersion="2.0-preview.1",r}return __extends(t,n),t}(f);t.InteractionHttpClient2=y;w=function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t}(e);t.InteractionHttpClient=w;p={"4.1":e,"4.0":o,"3.2":s,"3.1":h,"3.0":c,"2.3":l,"2.2":a,"2.1":v,"2.0":y};t.getClient=b});
define("Engagement/Interaction/Interaction",["require","exports","q","VSS/Context","VSS/Service","VSS/FeatureAvailability/Services","Engagement/Recommendation/Contracts","Engagement/Recommendation/SpsExtRestClient","Engagement/Interaction/SpsExtRestClient","Engagement/Recommendation/AexRestClient","Engagement/Interaction/AexRestClient","Engagement/Utils"],function(n,t,i,r,u,f,e,o,s,h,c,l){function y(n,t){var i=d(),u=r.getDefaultWebContext().account.id,f=r.getDefaultWebContext().project?r.getDefaultWebContext().project.id:"00000000-0000-0000-0000-000000000000",e={id:n,accountId:u,projectId:f,timestamp:new Date,interactionInputData:t};return i.add(e)}function w(n){var t=v();return t.logRecommendation(e.RecommendationType.PageInteraction,n)}function b(n){return y(n.getParent().getId())}function k(n){var t,o,u,s,f;return!n||l.isRecommendationDisabled()?i(!1):(t=r.getDefaultWebContext(),!t.account||!t.collection)?i(!1):(o=v(),u={},u[a.EngagementId]=n,u[a.AccountId]=t.account.id,u[a.CollectionId]=t.collection.id,u[a.ProjectId]=t.project?t.project.id:"00000000-0000-0000-0000-000000000000",s={recommendationInputData:u,recommendationType:e.RecommendationType.Engagement},f=i.defer(),o.getRecommendations(e.RecommendationType.Engagement,s).then(function(t){var i=t.recommendationData[a.EngagementId];f.resolve(i&&i.toLowerCase()===n.toLowerCase())},function(n){f.reject(n)}),f.promise)}function v(){if(p())return u.getCollectionClient(h.RecommendationHttpClient);var n=u.getCollectionClient(o.SpsExtRecommendationHttpClient);return n.forceOptionsCallForAutoNegotiate=!1,n}function d(){if(p())return u.getCollectionClient(c.InteractionHttpClient);var n=u.getCollectionClient(s.SpsExtInteractionHttpClient);return n.forceOptionsCallForAutoNegotiate=!1,n}function p(){return f.FeatureAvailabilityService.isFeatureEnabled("VisualStudio.Recommendation.UseAex",!1)}function g(n){var u,t,f;if(l.isRecommendationDisabled())return i(null);u=v();t={};t[a.PageId]=n;t[a.AccountId]=r.getDefaultWebContext().account.id;t[a.CollectionId]=r.getDefaultWebContext().collection.id;t[a.ProjectId]=r.getDefaultWebContext().project?r.getDefaultWebContext().project.id:"00000000-0000-0000-0000-000000000000";t[a.EngagementId]=l.getUrlParam(a.EngagementId);f={recommendationInputData:t,recommendationType:e.RecommendationType.PageInteraction};try{return u.getRecommendations(e.RecommendationType.PageInteraction,f).then(function(n){return n},function(){return i(null)})}catch(o){return i(null)}}Object.defineProperty(t,"__esModule",{value:!0});var a;(function(n){n.EngagementId="EngagementId";n.InteractionIds="InteractionIds";n.AccountId="AccountId";n.CollectionId="CollectionId";n.ProjectId="ProjectId";n.PageId="PageId"})(a||(a={}));t.logInteraction=y;t.logRecommendation=w;t.logInteractionQuickStartAction=b;t.recommendInteraction=k;t.recommendInteractions=g});
if (window.performance && window.performance.mark) { window.performance.mark('endLoadBundleInner-async'); }