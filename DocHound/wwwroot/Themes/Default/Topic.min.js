$(function(){$.expr[":"].contains=$.expr.createPseudo(function(n){return function(t){return $(t).text().toUpperCase().indexOf(n.toUpperCase())>=0}});userSettings={themeColorCss:"",syntaxHighlightCss:"",save:function(){localStorage&&localStorage.setItem("KavaDocsUserSettings",JSON.stringify(userSettings))},load:function(){if(localStorage){var n=localStorage.getItem("KavaDocsUserSettings");if(n)try{n=JSON.parse(n);$.extend(userSettings,n)}catch(t){localStorage.removeItem("KavaDocsUserSettings")}userSettings.refreshTargets()}},refreshTargets:function(){userSettings.refreshThemeSelector("#themeColorSelector",!0);userSettings.refreshThemeSelector("#themeColorSelector2",!0);userSettings.refreshSyntaxThemeSelector("#syntaxThemeSelector",!0);userSettings.refreshSyntaxThemeSelector("#syntaxThemeSelector2",!0)},refreshThemeSelector:function(n,t){if(userSettings.themeColorCss.length>0){$(n+" option").removeAttr("selected");var i=$(n+' option[value="'+userSettings.themeColorCss+'"]');i.length>0&&(i.attr("selected",""),t&&$(n).is(":visible")&&setTimeout(function(){i.trigger("change")}))}},refreshSyntaxThemeSelector:function(n,t){if(userSettings.syntaxHighlightCss.length>0){$(n+" option").removeAttr("selected");var i=$(n+' option[value="'+userSettings.syntaxHighlightCss+'"]');i.length>0&&(i.attr("selected",""),t&&$(n).is(":visible")&&setTimeout(function(){i.trigger("change")}))}}};userSettings.load();window.onpopstate=function(){history.state&&history.state.URL&&loadTopicAjax(history.state.URL,!0)};interceptNavigation();processTopicLoad();$(document.body).on("click",".caret",function(){var i=$(this).parent(),n,t;$(this).hasClass("caret-expanded")?($(this).removeClass("caret-expanded"),$(this).addClass("caret-collapsed"),n=$(">ul",i),n.removeClass("topic-expanded"),n.addClass("topic-collapsed")):($(this).removeClass("caret-collapsed"),$(this).addClass("caret-expanded"),t=$(">ul",i),t.removeClass("topic-collapsed"),t.addClass("topic-expanded"))});$("#tree-filter").keyup(function(){var t=$("#tree-filter").val(),n;t==""?$(".topic-list li").show():($(".topic-list li").hide(),n=$('.topic-list li:contains("'+t+'")'),n.parent().removeClass("topic-collapsed"),n.addClass("topic-expanded"),n.parent().addClass("topic-expanded"),n.show())});$("#tree-filter-mobile").keyup(function(){var t=$("#tree-filter-mobile").val(),n;t==""?$(".topic-list li").show():($(".topic-list li").hide(),n=$('.topic-list li:contains("'+t+'")'),n.parent().removeClass("topic-collapsed"),n.addClass("topic-expanded"),n.parent().addClass("topic-expanded"),n.show())});$(document).on("scroll",function(){$(document).scrollTop()>50?$(".header, .toc, .sidebar, .logo, .footer").addClass("scrolled"):$(".header, .toc, .sidebar, .logo, .footer").removeClass("scrolled");highlightActiveOutlineHeading()});window.highlightNextOutlineScroll=!0;$(".mobile-menu-icon").on("click",function(){$("body").hasClass("show-mobile-menu")?hideMobileMenu():showMobileMenu()});ensureSelectedTocEntryVisible();$(window).on("resize",handleWindowResize);handleWindowResize()});highlightActiveOutlineHeading=function(){var i,n,t,r,u;if(window.highlightNextOutlineScroll){for(i=$(".content-container h1, .content-container h2, .content-container h3"),n=null,t=0;t<i.length;t++)if(n||(n=$(i[t])),r=i[t].getBoundingClientRect(),r.bottom<50&&(n=$(i[t])),r.top>50)break;n&&n.length>0&&(u=n[0].id,$("#outline-content li").removeClass("selected"),$('#outline-content li[data-id="'+u+'"]').addClass("selected"))}};showMobileMenu=function(){$("body, .header, .content-container, .footer, .toc, #tree-filter").addClass("show-mobile-menu");$(".toc").addClass("mobile-styles-set");$(".toc").css("display","block");setTimeout(function(){$(".toc").css("z-index",1e4)},300)};hideMobileMenu=function(){$("body, .header, .content-container, .footer, #tree-filter").removeClass("show-mobile-menu");$(".toc").addClass("mobile-styles-set");$(".toc").css("z-index",-1);setTimeout(function(){$(".toc").removeClass("show-mobile-menu");$(".toc").css("display","none")},300)};ensureTopicIsExpandedAndVisible=function(n){var r=n.text(),t=$('.topic-list li:contains("'+r+'")'),i;t.parent().removeClass("topic-collapsed");t.addClass("topic-expanded");t.parent().addClass("topic-expanded");t.show();i=$(".topic-expanded>.caret.caret-collapsed");i.removeClass("caret-collapsed");i.addClass("caret-expanded");ensureSelectedTocEntryVisible()};ensureSelectedTocEntryVisible=function(){var n=$(".selected-topic");n.length>0&&n[0].scrollIntoView()};processTopicLoad=function(){var o=$("#themeColorSelector"),u,f,i,r,e,n,t;if(o.length>0&&(u=o[0].outerHTML,u=u.replace('id="themeColorSelector"','id="themeColorSelector2"'),appendToSettingsContainer('<span class="option-label">Theme Colors:'+u+"<\/span>")),$("#themeColorSelector").change(function(){handleThemeColorSelectorChange("#themeColorSelector")&&userSettings.refreshThemeSelector("#themeColorSelector2")}),$("#themeColorSelector2").change(function(){handleThemeColorSelectorChange("#themeColorSelector2")&&userSettings.refreshThemeSelector("#themeColorSelector")}),f=$("h1, h2, h3"),f.length>1){for(i='<select id="outlineSelect">',r="<ul>",e=0;e<f.length;e++)n=f[e],n.id&&(t='<li data-id="'+n.id+'" ',n.tagName=="H1"?(t=t+'class="outline-level-1"',i+='<option value="'+n.id+'">'+n.innerText+"<\/option>"):n.tagName=="H2"?(t=t+'class="outline-level-2"',i+='<option value="'+n.id+'">&nbsp;&nbsp;&nbsp;'+n.innerText+"<\/option>"):n.tagName=="H3"&&(t=t+'class="outline-level-3"',i+='<option value="'+n.id+'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'+n.innerText+"<\/option>"),t=t+'><a data-id="'+n.id+'" class="local-outline-jump">'+n.innerText+"<\/a><\/li>",r=r+t);r=r+"<\/ul>";i=i+"<\/select>";$("#outline-content").html(i+r);$("#outline").show();$("#outline-content").on("click","li>a",function(){var i,n,t;window.highlightNextOutlineScroll=!1;headerId=$.trim($(this).data("id"));i=$("#"+headerId)[0];i.scrollIntoView();n=$(document);n.scrollTop(n.scrollTop()-$("header").height()-10);t="#"+headerId;window.history.pushState({title:"",URL:t},"",t);$("#outline-content li").removeClass("selected");$(this).parent().addClass("selected");setTimeout(function(){window.highlightNextOutlineScroll=!0},500)})}highlightActiveOutlineHeading()};handleThemeColorSelectorChange=function(n){var t=$(n+" option:selected").val(),r=$(n+" option:selected").val(),i=$("link[href='"+r+"']");return i.length>0&&!i[0].disabled?!1:(userSettings.themeColorCss=t,userSettings.save(),$(n+" option").each(function(){var n=$(this).val(),i=$("link[href='"+n+"']");i.length>0&&(i[0].disabled=t!=n)}),$(n+" option:selected").each(function(){var n=$(this).val(),t=$("link[href='"+n+"']");t.length==0&&$("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />')}),!0)};interceptNavigation=function(){$(document).on("click","a",function(){var h,u,i,f,e,n,t,s,r;if($("body").hasClass("show-mobile-menu")&&hideMobileMenu(),h=$(this),!h.hasClass("local-outline-jump")){if(u=h.attr("href"),$(".selected-topic").removeClass("selected-topic"),i=$(this).parent(),i.hasClass("topic-link"))i.addClass("selected-topic"),f=i.find(">span.caret"),f.length>0&&(f.removeClass("caret-collapsed"),f.addClass("caret-expanded")),e=i.find(">ul.topic-list"),e.length>0&&(e.removeClass("topic-collapsed"),e.addClass("topic-expanded"));else{var c=!1,l=u,o=$(".topic-link a");for(n=0;n<o.length;n++)t=$(o[n]),slugMatchesTopic(l,t)&&(s=t.parent(),s.addClass("selected-topic"),ensureTopicIsExpandedAndVisible(t),c=!0);if(!c)for(n=0;n<o.length;n++)t=$(o[n]),linkMatchesTopic(l,t)&&(s=t.parent(),s.addClass("selected-topic"),ensureTopicIsExpandedAndVisible(t))}return ensureSelectedTocEntryVisible(),r=u.toLowerCase(),!r.startsWith("http://")&&!r.startsWith("https://")&&!r.startsWith("#")&&r.length>0?(loadTopicAjax(u),!1):void 0}})};slugMatchesTopic=function(n,t){if(!n||!t)return!1;var i=t.attr("data-slug");if(!i)return!1;for(n=n.toLowerCase(),i=i.toLowerCase();n.length>0&&n.startsWith("/");)n=n.substring(1);while(i.length>0&&i.startsWith("/"))i=i.substring(1);return n===i};linkMatchesTopic=function(n,t){var e,i,r,u,f;return n==null?!1:t==null?!1:(e=getNormalizedName(n).toLowerCase(),i=t.attr("data-slug"),i&&(i=getNormalizedName(i).toLowerCase(),i===e))?!0:(r=t.attr("data-link"),r&&(r=getNormalizedName(r).toLowerCase(),r===e))?!0:(u=t.attr("href"),u&&(u=getNormalizedName(u).toLowerCase(),u===e))?!0:(f=t.text(),f&&(f=getNormalizedName(f).toLowerCase(),f===e))?!0:(i=t.attr("data-slug"),i&&(i.indexOf(".")>-1&&(i=i.split(".")[0]),i=getNormalizedName(i).toLowerCase(),i===e))?!0:(r=t.attr("data-link"),r&&(r.indexOf(".")>-1&&(r=r.split(".")[0]),r=getNormalizedName(r).toLowerCase(),r===e))?!0:(u=t.attr("href"),u&&(u.indexOf(".")>-1&&(u=u.split(".")[0]),u=getNormalizedName(u).toLowerCase(),u===e))?!0:(f=t.text(),f&&(f.indexOf(".")>-1&&(f=f.split(".")[0]),f=getNormalizedName(f).toLowerCase(),f===e))?!0:!1};getNormalizedName=function(n){if(!n)return"";for(var t=n;t.indexOf(" ")>-1;)t=t.replace(" ","-");while(t.indexOf("%20")>-1)t=t.replace("%20","-");while(t.indexOf(",")>-1)t=t.replace(",","");while(t.indexOf("(")>-1)t=t.replace("(","");while(t.indexOf(")")>-1)t=t.replace(")","");while(t.indexOf("?")>-1)t=t.replace("?","");while(t.indexOf(":")>-1)t=t.replace(":","");while(t.indexOf("#")>-1)t=t.replace("#","");while(t.indexOf("&")>-1)t=t.replace("&","");while(t.indexOf("/")>-1)t=t.replace("/","");return t};loadTopicAjax=function(n,t){n+=n.indexOf("?")!==-1?"&notoc=true":"?notoc=true";$("article.content-container").css("opacity","0");$("aside.sidebar").css("opacity","0");setTimeout(function(){window.newContentLoading&&($("article.content-container").html(""),$("aside.sidebar").html(""),$("article.content-container").css("opacity","1"),$("aside.sidebar").css("opacity","1"))},200);window.newContentLoading=!0;setTimeout(function(){window.newContentLoading&&$("#load-indicator").css("display","block")},1e3);window.lastAjaxLoadUrl=n;$.get(n,function(i,r){var f,e,o;if(n==window.lastAjaxLoadUrl&&r=="success"){window.newContentLoading=!1;$("#load-indicator").css("display","none");var u=$("<div>"+i+"<\/div>"),s=u.find("script"),h=u.find("link");u.find("script").remove();u.find("link").remove();f=u.find("article.content-container");f.length>0&&($("article.content-container").html(f.html()),$("article.content-container").css("opacity","1"));e=u.find("aside.sidebar");e.length>0&&($("aside.sidebar").html(e.html()),$("aside.sidebar").css("opacity","1"));$('link[kava-custom="true"').remove();h.each(function(){var n=this.href,t,i;n.startsWith(window.location.origin)&&(n=n.substring(window.location.origin.length));t=$('link[href="'+n+'"]');t.length<1&&($("head").append(this),i=$(this).attr("kava-custom"),i.length<1&&$(this).attr("kava-custom","true"))});s.each(function(){var u=this.src,t=u.toLowerCase(),r,i,f;if(t.endsWith("jsmath/easy/load.js")){window.location.href=trimNoToc(n);return}if(t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),!t.endsWith("/topic.js")&&!t.endsWith("/topic.min.js")&&!t.endsWith("/jquery-3.2.1.min.js"))try{for(r=$("script"),i=0;i<r.length;i++)f=r[i].src,t=u.toLowerCase(),f.toLowerCase()==t&&r[i].remove();$("body").append(this)}catch(e){window.location.href=n}});!t&&window.history.pushState&&(o=u.find("title").text(),window.history.pushState({title:o,URL:n},"",trimNoToc(n)),document.title=o);setTimeout(function(){processTopicLoad();userSettings.refreshTargets();window.scrollTo(0,0)})}else{window.location.href=trimNoToc(n);return}})};trimNoToc=function(n){return n=n.replace("&notoc=true","").replace("?notoc=true","?").replace("?&","?").replace("&&","&"),(n.endsWith("?")||n.endsWith("&"))&&(n=n.substring(0,n.length-1)),n};debounce=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};handleWindowResize=function(){var t=$(".content-container").css("padding-top").replace("px",""),i=$(".content-container").css("padding-bottom").replace("px",""),n;$(".content-container").css("min-height",$(window).height()-t-i+"px");highlightActiveOutlineHeading();$("body").hasClass("show-mobile-menu")&&hideMobileMenu();n=$(".toc.mobile-styles-set");n.length>0&&(n.css("display","").css("z-index",""),n.removeClass("mobile-styles-set"))};getFeaturesContainer=function(){var i=$("article.content-container .features-container"),t,n;return i.length<1&&(t=$("article.content-container>*"),t.length>0&&(n=t[0],$(n).hasClass("settings-container")&&t.length>1&&(n=t[1]),n.nodeName=="H1"||n.nodeName=="H2"||n.nodeName=="H3"?$('<div class="features-container"><\/div>').insertAfter(n):$('<div class="features-container"><\/div>').insertBefore(n))),$("article.content-container .features-container")};appendToFeaturesContainer=function(n){if(n){var t=getFeaturesContainer();t.length>0&&t.append(n)}};getSettingsContainer=function(){var t=$("article.content-container .settings-container"),n;return t.length<1&&(n=$("article.content-container>*"),n.length>0&&$('<div class="settings-container"><\/div>').insertBefore(n[0])),$("article.content-container .settings-container")};appendToSettingsContainer=function(n){if(n){var t=getSettingsContainer();t.length>0&&t.append(n)}};